<font size=4 face="楷体">对引导滤波器的理解：利用图像$I$来引导$p$，一般而言是用自己引导自己；所以这样看最小化的式子：</font>
$$
E(a_k,b_k)=\sum_{i\in w_k}((a_kI_i+b_k-p_i)^2+\epsilon a_k^2)
$$
<font size=4 face="楷体">该式子由输出与原图$p$的差值与一个对$a_k$的惩罚组成；直观来看，在自己引导自己且没有惩罚时，$a_k=1,b_k=0$即可$min$；但加入了惩罚后，最小化该式子就会趋向于取一个较小的$a_k$，通过调整$b_k$来实现最小化；在区域内像素值相近时，减小$a_k$增加$b_k$可以有效减小$a_k$的惩罚，而前一项的值也不会有很大的变动(因为像素值相近，对某一点调好$b_k$后，其他点计算的结果也差不多)，这就对应着对原图进行了平滑处理；但是如果处理的区域是边缘的话，同一区域内会有值差距较大的像素点，而$a_k、b_k$是相同的，$a_k$的取值太小会使得亮部带来的距离变大，$b_k$调整又无法兼顾二者，所以$a_k$不可以取值太小，实现了一定的保留边缘(个人理解)；数学推导省略，最后得到在自己引导自己时：</font>
$$
a_k = \frac{\sigma _k^2}{\sigma_k^2+\epsilon }
$$
$\epsilon $越小，保边效果应该越好；越大，平滑越强;