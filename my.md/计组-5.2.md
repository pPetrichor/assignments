# <font face="楷体"><center>计算机组成原理第五章作业2</center></font>

<font size=4 face="楷体" color=#00bfff>14、</font>

<font size=4 face="楷体">	(1)答、存储单元的操作时间耗时最久，为200 ps，因此流水线的执行时间不会因为ALU的操作时间缩短而产生变化；</font>

<font size=4 face="楷体">	(2)答、ALU操作时间增加20%，变为180 ps，仍然小于200 ps，因此不会产生影响；</font>

<font size=4 face="楷体">	(3)答、ALU操作时间增加40%，变为210 ps，大于200 ps，因此流水线的时钟周期会增加，效率降低5%；</font>



<font size=4 face="楷体" color=#00bfff>16、</font>

<font size=4 face="楷体">	(1)答、总延迟为300 ps，因此尽量找一个接近150 ps的划分；即在C、D之间插入流水段寄存器；这种情况下时钟周期为`170 ps + 20 ps = 190 ps`，指令吞吐率为`1/190 ps = 5.26 GOPS`;指令执行时间为380 ps；</font>

<font size=4 face="楷体">	(2)答、尽量找100ps的划分，故在B、C之间和D、E之间插入流水段寄存器；这种情况下时钟周期为`110 ps + 20 ps = 130 ps`，指令吞吐率为`1/130 ps = 7.69 GOPS`;指令执行时间为390 ps；</font>

<font size=4 face="楷体">	(3)答、尽量找75ps的划分，故在A、B之间和C、D之间和D、E之间插入流水段寄存器；这种情况下时钟周期为`90 ps + 20 ps = 110 ps`，指令吞吐率为`1/110 ps = 9.09 GOPS`;指令执行时间为440 ps；</font>

<font size=4 face="楷体">	(4)答、单个组合逻辑延迟最大为80ps，因此时钟周期最小为`80 ps + 20 ps = 100 ps`，这种情况下指令吞吐率为`1 / 100 ps = 10 GOPS`；要保证每个组合逻辑块的延迟和不超过80 ps，可以在A、B之间，B、C之间，C、D之间，D、E之间插入流水段寄存器得到五级流水线，此时指令执行时间为500 ps；</font>



<font size=4 face="楷体" color=#00bfff>17、 </font>

<font size=4 face="楷体">	答、第一条指令与第二条指令(s3)、第二条指令与第三条指令(t2)、第二条指令与第四条指令(t2)、第三条指令与第四条指令(t1)之间发生数据相关；需要在第二条指令、第三条指令和第四条指令前各自加入3条nop指令；</font>

<font size=4 face="楷体">	利用“转发”可以解决除第三条指令与第四条指令之间的数据冒险，因为第三条指令与第四条指令之间的数据冒险是Load-use数据冒险；采用“转发”技术，只需要在lw指令后加一条nop指令即可；</font>



<font size=4 face="楷体" color=#00bfff>18、 </font>

<font size=4 face="楷体">	(1)答、第一条指令的s3需要转发到第二条指令的ALU输入端；第二条指令的t2要转发到第三条指令和第四条指令的ALU输入端；</font>

<font size=4 face="楷体">	(2)答、第三条指令与第四条指令之间存在Load-use数据冒险；</font>

<font size=4 face="楷体">	(3)答、第一条指令处于WB阶段，s3正在被写入；第二条指令处于M阶段，为空操作；同时正在进行“转发”操作；第三条指令处于EX阶段，正在进行地址计算；此外也在检测是否是Load-use冒险；第四条指令处于ID阶段，正在读取t1和t2，将会被阻塞一个时钟周期；第五条指令处于IF阶段，正在读取指令，由于Load-use冒险实际上是在第六个时钟周期读取出指令；</font>



<font size=4 face="楷体" color=#00bfff>19、</font>

<font size=4 face="楷体">	(1)答、“转发”解决了数据冒险，只剩下了Load-use数据冒险，即lw与下一条add之间要阻塞一个时钟周期；所以三个时钟周期执行了一条lw一条add，CPI为1.5；</font>

<font size=4 face="楷体">	(2)答、不带转发，则指令之间都之间需要阻塞两个时钟周期，CPI为3；</font>



<font size=4 face="楷体" color=#00bfff>20、</font>

<font size=4 face="楷体">	答、带有转发，则只需要处理第一、二条指令与第六、七条指令之间的Load-use数据冒险；注意到第四条指令与第一、二条指令无关，所以将指令四放到指令一、二之间；同理将指令五放到指令六、七之间，就可以消除Load-use数据冒险了。</font>



<font size=4 face="楷体" color=#00bfff>21、</font>

<font size=4 face="楷体">	答、在执行阶段，则为2；指令五与指令六之间为Load-use数据冒险，所以指令五前有一个时钟周期的阻塞；指令五与指令七会发生控制相关，为消除控制冒险，需要在j指令后有一个时钟周期的阻塞。</font>



<font size=4 face="楷体" color=#00bfff>22、</font>

<font size=4 face="楷体">	解：时钟周期为100 ps；</font>

<font size=4 face="楷体">	对于单周期方式，一个时钟周期执行一条指令；最复杂指令需要`200*2 + 100 + 50*2 = 600(ps)`；所以指令执行时间为600 ps；对于多周期方式，时钟周期为100 ps，平均CPI为`0.25*7+0.1*6+0.52*5+0.13*4 = 5.47`，故平均指令执行时间为547 ps；对于流水线方式，其中Load指令下一条指令需要阻塞2个时钟周期，下下条指令要阻塞1个时钟周期，所以平均的CPI为`1/2 * 3(和下一条指令相关) + 1/4(只和下下条指令相关) * 2 + 1/4 * 1 = 2.25`；Store指令没有冒险，CPI为1；ALU指令的数据冒险由转发解决，故CPI为1；Jump指令要等待译码完成，CPI为3；条件跳转CPI为`3/4 * 1 + 1/4 * 3 = 1.5`；总的平均CPI为`2.25*0.25+1*0.1+0.52*1+0.11*1.5*+0.02*3 = 1.4075`，故执行一条指令时间为140.75 ps；显然流水线方式更快，比单周期快`(600 - 140.75) / 600 = 77%`，比多周期快`(547 - 140.75)/547 = 74%`；</font>



<font size=4 face="楷体" color=#00bfff>23、</font>

<font size=4 face="楷体">	解：</font>

<font size=4 face="楷体">	共预测25次，(1)方案正确15次，准确率60%；(2)方案正确10次，准确率40%；(3)方案正确13次，准确率52%；(4)方案正确18次，准确率72%；</font>